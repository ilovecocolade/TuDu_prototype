<!DOCTYPE html>
<html lang="en">

{% load static %}

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta authors="John Allen & Michael Wood">

    <link rel="icon" href="{% static "main/img/favicon.ico" %}">

    <!--Slick carousel plugin css and theme.css-->
    <link rel="stylesheet" type="text/css" href="{% static "main/slick/slick.css" %}?{% now 'U' %}">
    <link rel="stylesheet" type="text/css" href="{% static "main/slick/slick-theme.css" %}?{% now 'U' %}">

    <!-- Bootstrap CSS -->
    <link href="{% static "main/css/bootstrap.css" %}" rel="stylesheet">

    <!-- Font awesome Icons -->
    <script src="{% static "main/js/fontawesome.js" %}"></script>

    <!-- JQuery -->
    <script src="{% static "main/js/jquery.js" %}"></script>

    <!-- Bootstrap -->
    <script src="{% static "main/js/bootstrap.bundle.js" %}"></script>

    <!-- TextFill JQuery plugin -->
    <script src="{% static "main/js/jquery.textfill.js" %}"></script>
    <script src="{% static "main/js/jquery.textfill.min.js" %}"></script>

    <!-- Slick plugin -->
    <script type="text/javascript" src="{% static "main/slick/slick.js" %}?{% now 'U' %}"></script>

    <!-- Custom styles for this template -->
    <link href="{% static "main/css/test3.css" %}?{% now 'U' %}" rel="stylesheet">

    <!-- Dashboard controller -->
    <script src="{% static "main/js/dashboard.js" %}?{% now 'U' %}" rel="dashboardcontroller"></script>
</head>

<body onload="popSubCategories(categories={{categories}}, sub_categories=null, initial=true)"
    onresize="resize_dashboard()">
    <!-- NAVBAR -->
    <nav class="navbar fixed-top navbar-expand">
        <a class="navbar-brand" href="/" style="color: #EFFD5F;">
            <img src="{% static "main/img/favicon.ico" %}" alt="logo" style="width: 32px; height: 32px;">
            <span style="font-size:120%;">|</span> TuDu
        </a>
        <div class="d-flex ml-auto">
            <ul class="navbar-nav">
                <li>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavDropdown">
                        <ul class="navbar-nav w-100 justify-content-end">
                            <li class="nav-item dropdown">
                                <a class="nav-link" href="#" id="navbarDropdownMenuLink" role="button"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="pr-2" style="color:#EFFD5F;">{{user.username}}</span>
                                    <svg class="bi bi-person-circle" width="32px" height="32px" viewBox="0 0 16 16"
                                        fill="#EFFD5F" xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 0 0 8 15a6.987 6.987 0 0 0 5.468-2.63z" />
                                        <path fill-rule="evenodd" d="M8 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                        <path fill-rule="evenodd"
                                            d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z" />
                                    </svg>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <!-- MAIN INTERACTIVE MAP -->
    <main class="no-gutters">

        <!--Floating interactionables-->

        <!--DropPin button-->
        {% if user.is_authenticated %}
        <button type="button" class="btn" id="dropPin">
            <span class="fa-stack fa-2x fa-fw">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-map-pin fa-stack-1x fa-inverse"></i>
            </span>
        </button>
        {% endif %}

        <!--Filter button.....card and script TBI
            <button type="button" class="btn mapBtn" name="filters" onclick="toggleFilterCard()">
                <span class="fa-stack fa-2x fa-fw">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-glasses fa-stack-1x fa-inverse"></i>
                </span>
            </button>-->

        <!--Floating search box-->
        <div class="container rounded" id="searchBoxFloat">
            <div class="row">
                <form class="form-inline" action="#">
                    <!--define form action (is this 'enter'?)-->
                    <input type="text" class="form-control" placeholder="Search..." id="searchFieldFloat">
                    <button class="btn" type="button" id="sidebarCollapse">
                        <span class="fa-stack">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="fas fa-search fa-stack-1x fa-inverse"></i>
                        </span>
                    </button>
                </form>
            </div>
        </div>

        <!--MapBox panel.....if sizing weird due to bootstrap, see CSS comment-->
        <div id="mapbox">
            <iframe width="100%" height="100%"
                src="https://maps.google.com/maps?width=100%&amp;height=600&amp;hl=en&amp;q=Leeds%20Castle%2C%20Broomfield%2C%20Maidstone+(mapboxplaceholder)&amp;ie=UTF8&amp;t=p&amp;z=9&amp;iwloc=B&amp;output=embed"
                frameborder="0" scrolling="no"><a href="http://www.gps.ie/">GPS
                    coordinates</a></iframe>
        </div>
    </main>

    <!-- DASHBOARD FOOTER -->
    <footer>

        <button type="button" class="btn" id="toggleDash">
            <span class="no-gutters" id="dashArrow"><i class="fas fa-caret-up"></i>DASHBOARD</span>
        </button>

        <div id="dashContent" class="no-gutters" style="height: 100%; display: none;">
            <div class="row no-gutters" style="height: 100%;">
                <div id="dashCarousel" class="container-fluid" style="height:100%;">
                    <div id="dash0">            
                        <!--Search card for dash-->
                        <div class="container cardContainer">
                            <div class="card cardAlt mx-auto">
                                <div class="card-header card-headerAlt">
                                    <div class="container">
                                        <div class="row">
                                            <form class="form-inline" action="#" id="searchDash">
                                                <!--define form action (is this 'enter'?)-->
                                                <input type="text" class="form-control" placeholder="Search..."
                                                    id="searchFieldDash">
                                                <button class="btn" type="submit" id="goSearch">
                                                    <span class="fa-stack">
                                                        <i class="fas fa-circle fa-stack-2x"></i>
                                                        <i class="fas fa-search fa-stack-1x fa-inverse"></i>
                                                    </span>
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body card-body-main">
                                    <div class="overflow-auto container-fluid card-bodyContainer">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                            <li class="list-group-item">search result</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="dash1">            
                        <!-- Locations card -->
                        <script>
                            function show_value(current_range) {
                                var unit = $('#range_unit').text();
            
                                if (unit == 'miles') {
                                    $('#range_value').html(current_range);
                                } else if (unit == 'km') {
                                    $('#range_value').html(Math.round(current_range * 1.6));
                                }
                            }
            
                            function change_unit() {
                                var unit = $('#range_unit').text();
                                var current_range = $('#range_value').text();
            
                                if (unit == 'miles') {
                                    $('#range_unit').html('km');
                                    $('#range_value').html(Math.floor(current_range * 1.6));
                                } else if (unit == 'km') {
                                    $('#range_unit').html('miles');
                                    $('#range_value').html(Math.round(current_range / 1.6));
                                }
            
                            }
                        </script>
                        <div class="container cardContainer">
                            <div class="card cardAlt mx-auto">
                                <div class="card-header locationCardHeader">
                                    <div class="no-gutters">
                                        <div class="row d-flex">
                                            <div class="col-8">
                                                <div class="row" style="height:30px;">
                                                    <h6 style="padding:5px 0 0 20px;">Things TuDu within <span
                                                            id="range_value">25</span>
                                                        <span id="range_unit">miles</span></h6>
                                                </div>
                                                <div class="row" style="height:25px; padding-left:40px;">
                                                    <div class="btn-group">
                                                        <button type="button" class="btn btn-group locationsCardBtn"
                                                            style="padding:0;">Filter</button>
                                                    </div>
                                                    <div class="btn-group dropright">
                                                        <button type="button" class="btn dropdown-toggle locationsCardBtn"
                                                            style="padding:0; margin-left: 20px;" data-toggle="dropdown">Sort
                                                            by</button>
                                                        <div class="dropdown-menu">
                                                            <a class="dropdown-item active">Ranking</a>
                                                            <a class="dropdown-item">Visits</a>
                                                            <a class="dropdown-item">Rating</a>
                                                            <a class="dropdown-item">Nearest</a>
                                                        </div>
                                                    </div>
                                                    <button class="btn btn-sm btn-outline-success" data-toggle="tooltip"
                                                        style="margin-left:10px;" id="verifyOnly"
                                                        onclick="verified_toggle()">Verified
                                                        only</button>
                                                </div>
                                            </div>
                                            <div class="col-2" style="padding:0;">
                                                <div class="slidecontainer no-gutters" style="width:70px">
                                                    <label style="margin-bottom:0; margin-left:10px"
                                                        for="searchRange"><small>Range:</small></label>
                                                    <input type="range" min="1" max="100" value="25" class="custom-range"
                                                        onchange="show_value(this.value)" id="searchRange">
                                                </div>
                                            </div>
                                            <div class="col-2" style="padding-left: 5px;">
                                                <div class="onoffswitch no-gutters">
                                                    <label for="myonoffswitch"
                                                        style="padding:0; margin:0;"><small>Units:</small></label>
                                                    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox"
                                                        onchange="change_unit();" id="myonoffswitch" tabindex="0" checked>
                                                    <label class="onoffswitch-label" for="myonoffswitch">
                                                        <span class="onoffswitch-inner"></span>
                                                        <span class="onoffswitch-switch"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body card-body-main">
                                    <div class="overflow-auto container-fluid card-bodyContainer">
                                        <table class="table table-sm table-hover w-auto locationsCardTable">
                                            <thead>
                                                <tr>
                                                    <th>Icon</th>
                                                    <th>Name</th>
                                                    <th>Status</th>
                                                    <th>Visits</th>
                                                    <th>Distance</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles</td>
                                                </tr>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles away</td>
                                                </tr>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles away</td>
                                                </tr>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles away</td>
                                                </tr>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles away</td>
                                                </tr>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles away</td>
                                                </tr>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles away</td>
                                                </tr>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles away</td>
                                                </tr>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles away</td>
                                                </tr>
                                                <tr>
                                                    <td>icon_img</td>
                                                    <td>Dungeness beach sea fishing</td>
                                                    <td>img</td>
                                                    <td>100k visits</td>
                                                    <td>15.5 miles away</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="dash2">
                        <!--Focus location card for dash-->
                        <div class="container cardContainer">
                            <div class="card cardAlt mx-auto">
                                <div class="card-header" id="focusCardHeader">
                                    <div id="focusHeaderContainer" class="container-fluid"
                                        style="height: 60px; width: 360px;">
                                        <span>LOCATION TITLE</span>
                                    </div>
                                </div>
                                <div class="card-body card-body-main">
                                    <div class="container-fluid">
                                        <div class="row d-flex" style="height:200px;">
                                            <div class="col-8" style="overflow:hidden;">
                                                <div id="locationImages" class="carousel slide" data-interval="false">
                                                    <!-- Indicators -->
                                                    <ul class="carousel-indicators">
                                                        <li data-target="locationImages" data-slide-to="0"
                                                            class="active">
                                                        </li>
                                                        <li data-target="locationImages" data-slide-to="1"></li>
                                                    </ul>
                                                    <!-- Slideshow -->
                                                    <div class="carousel-inner" id="imageContainer">
                                                        <div class="carousel-item active">
                                                            <img src="#" alt="title_image">
                                                        </div>
                                                        <div class="carousel-item">
                                                            <img src="#" alt="alt_image">
                                                        </div>
                                                    </div>
                                                    <!-- Left & right arrows -->
                                                    <a class="carousel-control-prev" href="#locationImages"
                                                        data-slide="prev">
                                                        <span class="carousel-control-prev-icon"></span>
                                                    </a>
                                                    <a class="carousel-control-next" href="#locationImages"
                                                        data-slide="next">
                                                        <span class="carousel-control-next-icon"></span>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="col-4" style="overflow:hidden; padding: 2px; line-height: 0.4">
                                                <h6 class="subHead">TuDu Ranking:</h6>
                                                <p>1 of 100</p>
                                                <h6 class="subHead" style="margin-top: 5px;">Visits:</h6>
                                                <p style="margin-bottom: 10px;">50</p>
                                                <h6 class="subHead" style="padding-top:5px;">Rating:</h6>
                                                <span class="fa fa-star checked"></span>
                                                <span class="fa fa-star checked"></span>
                                                <span class="fa fa-star checked"></span>
                                                <span class="fa fa-star"></span>
                                                <span class="fa fa-star"></span>
                                                <h6 class="subHead" style="margin-bottom: 0; padding-top: 10px;">
                                                    Distance:
                                                </h6>
                                                <p style="font-size: 15px; line-height: 1;">100 miles or 160 km away</p>
                                            </div>
                                        </div>
                                        <div class="row" style="height:20px; margin-top:5px;">
                                            <div class="col-8 d-flex justify-content-center">
                                                <span class="badge badge-pill badge-success align-top"
                                                    data-toggle="tooltip"
                                                    title="'verification definition here!'">verified</span>
                                                <span class="badge badge-pill badge-danger align-top"
                                                    data-toggle="tooltip"
                                                    title="'flagged definition here!'">flagged</span>
                                            </div>
                                            <div class="col-4 mx-auto" style="overflow:hidden; padding: 0; margin: 0;">
                                                <span>
                                                    <button class="btn btn-sm btn-outline-success verifyBtn"
                                                        data-toggle="tooltip">'Verify this'</button>
                                                    <button class="btn btn-sm btn-outline-danger flagBtn">'Flag
                                                        this'</button>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="row" style="height:80px; margin-top:5px;">
                                            <div class="container-fluid overflow-auto" style="height:80px;">
                                                <p>Description:
                                                    iogerjiofjaeriofjselrjhfiesjcfgmojmeiopwejroicgjkouiewjhfjselrjhfiesjcfgmojmeiopwejroicgjkouiewjhfjselrjhfiesjcfgmojmeiopwejroicgjkouiewjhfjselrjhfiesjcfgmojmeiopwejroicgjkouiewjhfjselrjhfiesjcfgmojmeiopwejroicgjkouiewjhfjselrjhfiesjcfgmojmeiopwejroicgjkouiewjhcioge5jiowgsjeriolgs
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- TextFill -->
                        <script>
                            $('#focusHeaderContainer').textfill({});
                        </script>
                    </div>
                    <div id="dash3">
                        <div class="card" id="filterCard">
                            <div class="card-header" id="filterCardHeader">
                                <div class="catBtnContainer no-gutters">
                                    {% for name, sub_cat in categories.items %}
                                    <button class="btn catBtn"
                                        onclick="popSubCategories(categories=null, sub_categories={{sub_cat}}, initial=false)">{{name}}</button>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="card-body" id="filterCardBody"
                                style="background-color: orange; padding:0; margin:0;">

                                <div class="no-gutters">
                                    <div id="filterMenu" class="carousel slide" data-interval="false">

                                        <ul class="carousel-indicators subCat" style="margin: 0; padding: 0;"
                                            id="carousel-pages">
                                        </ul>

                                        <div class="carousel-inner">
                                            <div class="container" id="subCatCarousel">
                                            </div>
                                        </div>

                                        <a class="carousel-control-prev" href="#filterMenu" role="button"
                                            data-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                        <a class="carousel-control-next" href="#filterMenu" role="button"
                                            data-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </footer>

    <!--SLICK dashCarousel-->
    <script>
        $(document).on('click', '#toggleDash', function () {
            $('#dashCarousel').slick({
                //general
                infinite: false,
                slidesToShow: 4,
                arrows: true,
                prevArrow: "<button type='button' class='slick-prev pull-left'><i class='fa fa-angle-left' aria-hidden='true'></i></button>",
                nextArrow: "<button type='button' class='slick-next pull-right'><i class='fa fa-angle-right' aria-hidden='true'></i></button>",

                //responsivity
                responsive: [{
                    breakpoint: 1580,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 1,
                    }
                }, {
                    breakpoint: 1190,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2,
                    }
                }, {
                    breakpoint: 800,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1,
                    }
                }]
            });
        });

    </script>


</body>

</html>